{"version":3,"sources":["webpack:///webpack/bootstrap 380cf1c545a27bbe05e6","webpack:///./src/views/innerview/InnerController.es6","webpack:///./src/views/innerview/InnerWorld.es6","webpack:///./src/views/innerview/NavPath.es6","webpack:///./src/views/innerview/TriggerObject.es6","webpack:///./src/views/innerview/InnerView.es6","webpack:///./src/views/innerview/InnerGaze.es6"],"names":["InnerWorld","require","default","InnerView","InnerGaze","document","addEventListener","inner","InnerController","world","view","gaze","scene","input","DesktopControls","socket","io","location","origin","lastMessage","pivot","pos","bindSocketEvents","socketUpdate","active","mainLoop","window","requestAnimationFrame","busy","target","getGaze","camera","worldObject","navNodes","children","position","setMoveTo","update","checkTriggers","render","console","log","stopSoundTrack","emit","newWorldPos","JSON","stringify","x","y","z","on","setRotateTo","NavPath","TriggerObject","props","rotationSpeed","moveSpeed","isRotating","isMoving","vectorRotationCurrent","THREE","Vector3","vectorRotationTarget","vectorMoveTarget","rotationAsDegrees","getWorldObject","lights","getLights","skybox","getSkybox","pivotObject","Object3D","getScene","which","isBusy","Math","PI","offset","subVectors","obj","delta","length","rotateOneTick","fixDegrees","getWorldRotation","setLength","add","updateNodes","rotate","move","navPaths","forEach","navPath","setVisible","triggers","trigger","checkHit","name","rotation","updateMatrixWorld","radArray","r","d","i","round","push","abs","Scene","playerLight","globalLight","PointLight","HemisphereLight","set","imagePrefix","directions","imageSuffix","skyGeometry","BoxGeometry","skyMaterialArray","MeshBasicMaterial","map","ImageUtils","loadTexture","side","BackSide","skyMaterial","MeshFaceMaterial","Mesh","loader","ColladaLoader","triggerObjects","navNodesObject","material","MeshPhongMaterial","color","load","dae","collada","scale","traverse","child","indexOf","visible","path","points","geometry","attributes","array","nodes","node","pars","initNodes","transparent","point","cube","found","j","callBack","callback","getCamera","renderer","getRenderer","effect","getEffect","controls","getControls","clock","Clock","resizeHandler","e","innerWidth","innerHeight","getDelta","body","removeChild","domElement","rot","cam","lon","lat","max","min","phi","theta","sin","cos","lookAt","w","h","aspect","updateProjectionMatrix","useQuaternions","setSize","PerspectiveCamera","WebGLRenderer","setClearColor","shadowMapEnabled","appendChild","StereoEffect","DeviceOrientationEvent","c","DeviceOrientationControls","connect","rayCaster","Raycaster","rayVector","lookingAt","id","timer","delay","cooldown","Date","now","n","setFromCamera","intersects","intersectObjects","filter","int","object","realPosition","setFromMatrixPosition","matrixWorld"],"mappings":"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","file":"inner.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 380cf1c545a27bbe05e6","const InnerWorld = require('./InnerWorld.es6').default;\r\nconst InnerView = require('./InnerView.es6').default;\r\nconst InnerGaze = require('./InnerGaze.es6').default;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    const inner = new InnerController();\r\n});\r\n\r\nclass InnerController {\r\n\r\n  constructor() {\r\n    this.world = new InnerWorld();\r\n    this.view = new InnerView();\r\n    this.gaze = new InnerGaze(this.world.scene);\r\n    this.input = new DesktopControls();\r\n\r\n    this.socket = io(document.location.origin);\r\n    this.lastMessage = { pivot: '', pos: '' };\r\n\r\n    this.bindSocketEvents();\r\n    this.socketUpdate();\r\n\r\n    this.active = true;\r\n    this.mainLoop();\r\n  }\r\n\r\n  /*\r\n   *  'Private' methods\r\n   */\r\n\r\n   mainLoop() {\r\n\r\n     if (!this.active)\r\n         return;\r\n\r\n     window.requestAnimationFrame(() => {\r\n       this.mainLoop();\r\n     });\r\n\r\n     if (!this.world.busy) {\r\n        const target = this.gaze.getGaze(this.view.camera, this.world.worldObject.navNodes.children, this.world.position);\r\n        if (target != null) this.world.setMoveTo(target);\r\n\r\n        //this.world.setJumpBy(this.input.getMovement(),this.view.getRotation());\r\n     }\r\n\r\n     if (this.world.update()) {\r\n        this.socketUpdate();\r\n        this.checkTriggers();\r\n     }\r\n\r\n     //this.view.rotate(this.input.getMouse());\r\n\r\n     this.view.render(this.world.scene);\r\n   }\r\n\r\n   checkTriggers() {\r\n      switch (this.world.checkTriggers()) {\r\n          case 'Trigger_Finish' :\r\n              console.log('mainGame -> won');\r\n              this.stopSoundTrack();\r\n\r\n              this.socket.emit('won', true);\r\n              break;\r\n      }\r\n   }\r\n\r\n   socketUpdate() {\r\n      const newWorldPos = JSON.stringify({\r\n          x: this.world.position.x,\r\n          y: this.world.position.y,\r\n          z: this.world.position.z\r\n      });\r\n\r\n      if (newWorldPos !== this.lastMessage.pos) {\r\n          this.socket.emit('world-position', newWorldPos);\r\n          this.lastMessage.pos = newWorldPos;\r\n          console.log('mainGame -> worldpos', newWorldPos);\r\n      }\r\n   }\r\n\r\n   bindSocketEvents() {\r\n     this.socket.on('rotate-h', () => { this.world.setRotateTo(this.world, 72); });\r\n     this.socket.on('rotate-k', () => { this.world.setRotateTo(this.world, 75); });\r\n     this.socket.on('rotate-u', () => { this.world.setRotateTo(this.world, 85); });\r\n     this.socket.on('rotate-j', () => { this.world.setRotateTo(this.world, 74); });\r\n   }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/innerview/InnerController.es6","const NavPath = require('./NavPath.es6').default;\r\nconst TriggerObject = require('./TriggerObject.es6').default;\r\n\r\nexport default class InnerWorld {\r\n    constructor() {\r\n        this.props = {\r\n            rotationSpeed: 0.03,\r\n            moveSpeed: 0.2,\r\n            isRotating: false,\r\n            isMoving: false,\r\n            vectorRotationCurrent: new THREE.Vector3(0, 0, 0),\r\n            vectorRotationTarget: new THREE.Vector3(0, 0, 0),\r\n            vectorMoveTarget: new THREE.Vector3(0, 0, 0),\r\n            rotationAsDegrees: []\r\n        };\r\n\r\n        this.worldObject = this.getWorldObject();\r\n        this.lights = this.getLights();\r\n        this.skybox = this.getSkybox();\r\n        this.pivotObject = new THREE.Object3D();\r\n        this.scene = this.getScene();\r\n    }\r\n\r\n    /*\r\n     *  'Public' methods\r\n     */\r\n\r\n    setRotateTo(which) {\r\n        if (this.isBusy())\r\n            return;\r\n\r\n        this.props.vectorRotationTarget = new THREE.Vector3(this.props.vectorRotationCurrent.x,\r\n            this.props.vectorRotationCurrent.y,\r\n            this.props.vectorRotationCurrent.z);\r\n\r\n        switch (which) {\r\n            case 72: //H\r\n                this.props.vectorRotationTarget.z = this.props.vectorRotationTarget.z + (Math.PI * .5);\r\n                break;\r\n            case 75: //K\r\n                this.props.vectorRotationTarget.z = this.props.vectorRotationTarget.z - (Math.PI * .5);\r\n                break;\r\n            case 85: //U\r\n                this.props.vectorRotationTarget.x = this.props.vectorRotationTarget.x - (Math.PI * .5);\r\n                break;\r\n            case 74: //J\r\n                this.props.vectorRotationTarget.x = this.props.vectorRotationTarget.x + (Math.PI * .5);\r\n                break;\r\n        }\r\n\r\n        this.props.isRotating = true;\r\n    }\r\n\r\n    setMoveTo(target) {\r\n        const offset = new THREE.Vector3(target.x, target.y, target.z);\r\n        this.props.vectorMoveTarget = new THREE.Vector3().subVectors(this.worldObject.obj.position, offset);\r\n        this.props.isMoving = true;\r\n    }\r\n\r\n    rotate() {\r\n        if (!this.props.isRotating)\r\n            return;\r\n\r\n        var delta = new THREE.Vector3();\r\n        delta.subVectors(this.props.vectorRotationTarget, this.props.vectorRotationCurrent);\r\n\r\n        if (delta.length() < this.props.rotationSpeed) {\r\n            // rotation is very close to target\r\n            // so set rotation to target and stop rotating\r\n            this.props.vectorRotationCurrent = this.props.vectorRotationTarget;\r\n            this.rotateOneTick();\r\n            this.props.isRotating = false;\r\n            this.props.rotationAsDegrees = this.fixDegrees([\r\n                this.worldObject.obj.getWorldRotation().x,\r\n                this.worldObject.obj.getWorldRotation().y,\r\n                this.worldObject.obj.getWorldRotation().z\r\n            ]);\r\n\r\n            return true;\r\n\r\n        } else {\r\n            // rotation by rotationSpeed\r\n            delta.setLength(this.props.rotationSpeed);\r\n            this.props.vectorRotationCurrent.add(delta);\r\n            this.rotateOneTick();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    move() {\r\n        if (!this.props.isMoving)\r\n            return;\r\n\r\n        var delta = new THREE.Vector3();\r\n        delta.subVectors(this.props.vectorMoveTarget, this.worldObject.obj.position);\r\n\r\n        if (delta.length() < this.props.moveSpeed) {\r\n            // move is very close to target\r\n            // so set position to target and stop moving\r\n            this.worldObject.obj.position.x = this.props.vectorMoveTarget.x;\r\n            this.worldObject.obj.position.y = this.props.vectorMoveTarget.y;\r\n            this.worldObject.obj.position.z = this.props.vectorMoveTarget.z;\r\n            this.props.isMoving = false;\r\n            this.updateNodes();\r\n            return true;\r\n        } else {\r\n            // move by moveSpeed\r\n            delta.setLength(this.props.moveSpeed);\r\n            this.worldObject.obj.position.add(delta);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    update() {\r\n        if (this.rotate() || this.move()) return true;\r\n    }\r\n\r\n    updateNodes() {\r\n        this.worldObject.navPaths.forEach(function (navPath) {\r\n            navPath.setVisible(this.worldObject.obj.position);\r\n        }, this);\r\n    };\r\n\r\n    checkTriggers() {\r\n        this.worldObject.triggers.forEach(trigger => {\r\n            trigger.checkHit(this.position, name => {\r\n                return name;\r\n            })\r\n        });\r\n\r\n        return '';\r\n    }\r\n\r\n    get busy() {\r\n        return this.isBusy();\r\n    }\r\n\r\n    get position() {\r\n        return this.worldObject.obj.position;\r\n    }\r\n\r\n    /*\r\n     *  'Private' methods\r\n     */\r\n\r\n    rotateOneTick() {\r\n        this.pivotObject.rotation.x = this.props.vectorRotationCurrent.x;\r\n        this.pivotObject.rotation.y = this.props.vectorRotationCurrent.y;\r\n        this.pivotObject.rotation.z = this.props.vectorRotationCurrent.z;\r\n        this.pivotObject.updateMatrixWorld();\r\n    }\r\n\r\n    isBusy() {\r\n        return (this.props.isMoving || this.props.isRotating);\r\n    }\r\n\r\n    //turn radians into degrees, rounded to 0, 90, 180 or 270\r\n    fixDegrees(radArray) {\r\n        let r = [], d;\r\n        for (let i = 0; i < radArray.length; i++) {\r\n            d = (Math.round((radArray[i] * 180 / Math.PI) / 10) * 10);\r\n            d = d === -90 ? 270 : d;\r\n            r.push(Math.abs(d));\r\n        }\r\n        return r;\r\n    }\r\n\r\n    /*\r\n     *  Init methods\r\n     */\r\n\r\n    getScene() {\r\n        const scene = new THREE.Scene();\r\n        scene.add(this.lights.playerLight);\r\n        scene.add(this.lights.globalLight);\r\n        scene.add(this.skybox);\r\n\r\n        this.pivotObject.add(this.worldObject.obj);\r\n        scene.add(this.pivotObject);\r\n\r\n        return scene;\r\n    }\r\n\r\n    getLights() {\r\n        const playerLight = new THREE.PointLight(0xffffff, 1, 20);\r\n        const globalLight = new THREE.HemisphereLight(0xff0000, 0x89584B, 0.3);\r\n\r\n        playerLight.position.set(0, 0, 0);\r\n\r\n        return {\r\n            playerLight,\r\n            globalLight\r\n        }\r\n    }\r\n\r\n    getSkybox() {\r\n        const imagePrefix = \"/assets/textures/images/skybox-innerView-\";\r\n        const directions = [\"west\", \"east\", \"up\", \"down\", \"north\", \"south\"];\r\n        const imageSuffix = \".jpg\";\r\n        const skyGeometry = new THREE.BoxGeometry(100, 100, 100);\r\n\r\n        const skyMaterialArray = [];\r\n        for (var i = 0; i < 6; i++) {\r\n            skyMaterialArray.push(new THREE.MeshBasicMaterial({\r\n                map: THREE.ImageUtils.loadTexture(imagePrefix + directions[i] + imageSuffix),\r\n                side: THREE.BackSide,\r\n            }));\r\n        }\r\n        const skyMaterial = new THREE.MeshFaceMaterial(skyMaterialArray);\r\n\r\n        return new THREE.Mesh(skyGeometry, skyMaterial);\r\n    }\r\n\r\n    getWorldObject() {\r\n        const loader = new THREE.ColladaLoader();\r\n\r\n        const worldObject = new THREE.Object3D();\r\n        const triggerObjects = [];\r\n        const navPaths = [];\r\n        const navNodesObject = new THREE.Object3D();\r\n\r\n        const material = new THREE.MeshPhongMaterial({color: 0x333333});\r\n\r\n        loader.load('/assets/models/prototypeMazeV4.dae', collada => {\r\n            const dae = collada.scene;\r\n\r\n            dae.scale.x = dae.scale.y = dae.scale.z = 0.01;\r\n\r\n            dae.traverse(child => {\r\n                child.material = material;\r\n\r\n                // push Triggers to triggerObjects array;\r\n                if (child.name !== null && child.name.indexOf(\"Trigger\") === 0) {\r\n                    const trigger = {\r\n                        name: child.name,\r\n                        pos: {\r\n                            x: Math.round(child.position.x / 100),\r\n                            y: Math.round(child.position.y / 100),\r\n                            z: Math.round(child.position.z / 100)\r\n                        }\r\n                    };\r\n                    triggerObjects.push(new TriggerObject(trigger));\r\n                    child.visible = false;\r\n                }\r\n\r\n                // push NavPaths to NavPaths array;\r\n                if (child.name !== null && child.name.indexOf(\"NavPath\") === 0) {\r\n                    const path = {\r\n                        name: child.name,\r\n                        pos: {\r\n                            x: Math.round(child.position.x / 100),\r\n                            y: Math.round(child.position.y / 100),\r\n                            z: Math.round(child.position.z / 100)\r\n                        },\r\n                        points: [{\r\n                            x: Math.round(child.geometry.attributes.position.array[0] / 100),\r\n                            y: Math.round(child.geometry.attributes.position.array[1] / 100),\r\n                            z: Math.round(child.geometry.attributes.position.array[2] / 100)\r\n                        },\r\n                            {\r\n                                x: Math.round(child.geometry.attributes.position.array[3] / 100),\r\n                                y: Math.round(child.geometry.attributes.position.array[4] / 100),\r\n                                z: Math.round(child.geometry.attributes.position.array[5] / 100)\r\n                            }]\r\n                    };\r\n                    navPaths.push(new NavPath(path));\r\n                    child.visible = false;\r\n                }\r\n            });\r\n\r\n            navPaths.forEach(navPath => {\r\n                navPath.nodes.forEach(node => {\r\n                    navNodesObject.add(node);\r\n                });\r\n            });\r\n\r\n\r\n            worldObject.add(navNodesObject);\r\n            worldObject.add(dae);\r\n\r\n            this.updateNodes();\r\n        });\r\n\r\n        return {\r\n            obj: worldObject,\r\n            triggers: triggerObjects,\r\n            navPaths: navPaths,\r\n            navNodes: navNodesObject\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/innerview/InnerWorld.es6","export default class NavPath {\r\n  constructor(pars) {\r\n    this.name = pars.name;\r\n    this.position = new THREE.Vector3(pars.pos.x, pars.pos.y, pars.pos.z);\r\n    this.nodes = this.initNodes(pars.points);\r\n  }\r\n\r\n  initNodes(points) {\r\n    const geometry = new THREE.BoxGeometry(1, 1, 1);\r\n    const material = new THREE.MeshBasicMaterial({\r\n        map: new THREE.ImageUtils.loadTexture(\"/assets/textures/crosshair.png\"),\r\n        transparent: true\r\n    });\r\n\r\n    return points.map( (point, i) => {\r\n      const cube = new THREE.Mesh(geometry, material);\r\n      cube.position.x = point.x;\r\n      cube.position.y = point.y;\r\n      cube.position.z = point.z;\r\n      cube.name = this.name + \"_\" + i;\r\n      cube.visible = false;\r\n      return cube;\r\n    });\r\n  }\r\n\r\n  setVisible(position) {\r\n    let found = -1;\r\n\r\n    this.nodes.forEach((node, i) => {\r\n        node.visible = false;\r\n        if (node.position.x === -(position.x) &&\r\n            node.position.y === -(position.y) &&\r\n            node.position.z === -(position.z)) {\r\n            found = i;\r\n        }\r\n    });\r\n\r\n    if (found > -1) {\r\n        this.nodes.forEach((node, j) => {\r\n            if (j !== found)\r\n                node.visible = true;\r\n        });\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/innerview/NavPath.es6","export default class TriggerObject {\r\n  constructor(pars) {\r\n    this.name = pars.name;\r\n    this.position = new THREE.Vector3(pars.pos.x, pars.pos.y, pars.pos.z);\r\n  }\r\n\r\n  checkHit(position, callBack) {\r\n    if (this.position.x === -(position.x) &&\r\n        this.position.y === -(position.y) &&\r\n        this.position.z === -(position.z)) {\r\n        callback(this.name);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/innerview/TriggerObject.es6","export default class InnerView {\r\n  constructor() {\r\n    this.camera   = this.getCamera();\r\n    this.renderer = this.getRenderer();\r\n    this.effect   = this.getEffect();\r\n    this.controls = this.getControls();\r\n    this.clock    = new THREE.Clock();\r\n\r\n    window.addEventListener('resize', e => {\r\n      this.resizeHandler(e.target.innerWidth, e.target.innerHeight);\r\n    });\r\n  }\r\n\r\n  /*\r\n   * 'Public' methods\r\n   */\r\n\r\n  render(scene) {\r\n    this.renderer.render(scene, this.camera.obj);\r\n    this.effect.render(scene,this.camera.obj);\r\n\r\n    if (this.controls)\r\n        this.controls.update( this.clock.getDelta() );\r\n  }\r\n\r\n  destroy() {\r\n    document.body.removeChild( this.renderer.domElement );\r\n  }\r\n\r\n  rotate(rot) {\r\n    if (!this.controls) // only used for desktop, no mobile orientation controls\r\n      return;\r\n\r\n    const cam = this.camera;\r\n\r\n    cam.lon += rot.x;\r\n    cam.lat = Math.max( - 85, Math.min( 85, cam.lat - rot.y) );\r\n\r\n    var phi = ( 90 - cam.lat ) * Math.PI / 180;\r\n    var theta = cam.lon * Math.PI / 180;\r\n    cam.target.x = cam.obj.position.x + Math.sin( phi ) * Math.cos( theta );\r\n    cam.target.y = cam.obj.position.y + Math.cos( phi );\r\n    cam.target.z = cam.obj.position.z + Math.sin( phi ) * Math.sin( theta );\r\n\r\n    cam.obj.lookAt(cam.target);\r\n  }\r\n\r\n  get rotation() {\r\n    return this.camera.obj.rotation;\r\n  }\r\n\r\n  /*\r\n   *  'Private' methods\r\n   */\r\n\r\n  resizeHandler(w,h) {\r\n     this.camera.obj.aspect = w / h;\r\n     this.camera.obj.updateProjectionMatrix();\r\n     this.camera.obj.useQuaternions = true;\r\n\r\n     this.renderer.setSize( w, h );\r\n     this.effect.setSize( w, h );\r\n   }\r\n\r\n  /*\r\n   *  Init methods\r\n   */\r\n\r\n  getCamera() {\r\n    return {\r\n      obj: new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 ),\r\n      target: new THREE.Vector3(),\r\n      lat: 0,\r\n      lon: 0,\r\n      phi: 0,\r\n      theta: 0\r\n    }\r\n  }\r\n\r\n  getRenderer() {\r\n    const r = new THREE.WebGLRenderer();\r\n    r.setClearColor(0x000000, 1);\r\n    r.setSize( window.innerWidth, window.innerHeight );\r\n    r.shadowMapEnabled = true;\r\n    document.body.appendChild(r.domElement);\r\n    return r;\r\n  }\r\n\r\n  getEffect() {\r\n    const e = new THREE.StereoEffect(this.renderer);\r\n    e.setSize( window.innerWidth, window.innerHeight );\r\n    return e;\r\n  }\r\n\r\n  getControls() {\r\n    if (!window.DeviceOrientationEvent)\r\n      return false;\r\n\r\n    const c = new THREE.DeviceOrientationControls(this.camera.obj);\r\n    c.connect();\r\n    c.update();\r\n    return c;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/innerview/InnerView.es6","class InnerGaze {\r\n  constructor() {\r\n    this.rayCaster = new THREE.Raycaster();\r\n    this.rayVector = new THREE.Vector3();\r\n\r\n    this.lookingAt = {id: 0, timer: 0, delay: 1000, cooldown: 0};\r\n  }\r\n\r\n  getGaze(camera, navNodes, position) {\r\n    if (Date.now() - this.lookingAt.cooldown < this.lookingAt.delay)\r\n        return;\r\n\r\n    navNodes.forEach( n => {\r\n        n.material.color.set(0xffffff);\r\n    });\r\n\r\n    this.rayCaster.setFromCamera( this.rayVector, camera.obj );\r\n\r\n    let intersects = this.rayCaster.intersectObjects(navNodes, true)\r\n      .filter( int => {\r\n        return int.object.visible;\r\n      });\r\n\r\n    if (intersects.length > 0 && intersects[0].object.name.indexOf(\"NavPath\") === 0) {\r\n\r\n        if (this.lookingAt.id === intersects[0].object.id) {\r\n\r\n            const realPosition = new THREE.Vector3().setFromMatrixPosition(intersects[0].object.matrixWorld);\r\n\r\n            if (Math.abs(realPosition.y) > 2) {\r\n\r\n                intersects[0].object.material.color.set(0xff0000);\r\n\r\n            } else {\r\n\r\n                intersects[0].object.material.color.set(0x00ff00);\r\n\r\n                if (Date.now() - this.lookingAt.timer > this.lookingAt.delay) {\r\n\r\n                    this.lookingAt.cooldown = Date.now();\r\n\r\n                    return new THREE.Vector3(\r\n                        (position.x) + intersects[0].object.position.x,\r\n                        (position.y) + intersects[0].object.position.y,\r\n                        (position.z) + intersects[0].object.position.z\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.lookingAt.id = intersects[0].object.id;\r\n            this.lookingAt.timer = Date.now();\r\n        }\r\n\r\n    } else {\r\n        this.lookingAt.id = 0;\r\n    }\r\n  }\r\n}\r\n\r\nexport default InnerGaze;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/innerview/InnerGaze.es6"],"sourceRoot":""}